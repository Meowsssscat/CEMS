{% extends "base_department.html" %}

{% block title %}Event Registrations - CESMS{% endblock %}

{% block content %}
<!-- Event Registrations Page Styles -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/event-registrations.css') }}?v=1">

<div class="event-registrations-container">
  <!-- Flash Messages -->


  <!-- Events Overview -->
  <div class="events-overview">
    {% if events %}
      <div class="events-grid">
        {% for event in events %}
        <div class="event-card">
          <div class="event-header">
            <div class="event-title-section">
              <h3 class="event-title">{{ event.event_name }}</h3>
              <div class="event-meta">
                <span class="event-date">{{ event.date }}</span>
                <span class="event-time">{{ event.start_time }} - {{ event.end_time }}</span>
              </div>
            </div>
            <div class="event-status">
              <span class="status-badge status-{{ event.status.lower() }}">
                {{ event.status }}
              </span>
            </div>
          </div>
          
          <div class="event-content">
            <div class="event-details">
              <div class="detail-item">
                <span class="detail-icon">📍</span>
                <span class="detail-label">Location:</span>
                <span class="detail-value">{{ event.location }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-icon">👤</span>
                <span class="detail-label">Participant Limit:</span>
                <span class="detail-value">
                  {% if event.participant_limit %}
                    {{ event.participant_limit }}
                  {% else %}
                    Unlimited
                  {% endif %}
                </span>
              </div>
            </div>
          </div>
          
          <div class="registration-summary">
            <h4 class="summary-title">Registration Summary</h4>
            <div class="summary-stats">
              <div class="stat-item">
                <div class="stat-icon">📊</div>
                <div class="stat-content">
                  <span class="stat-label">Total</span>
                  <span class="stat-value">{{ event.total_registrations }}</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">⏳</div>
                <div class="stat-content">
                  <span class="stat-label">Pending</span>
                  <span class="stat-value pending">{{ event.registration_counts.Pending }}</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">✅</div>
                <div class="stat-content">
                  <span class="stat-label">Approved</span>
                  <span class="stat-value approved">{{ event.registration_counts.Approved }}</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">🔄</div>
                <div class="stat-content">
                  <span class="stat-label">Auto-Approved</span>
                  <span class="stat-value auto-approved">{{ event.registration_counts['Auto-Approved'] }}</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">❌</div>
                <div class="stat-content">
                  <span class="stat-label">Rejected</span>
                  <span class="stat-value rejected">{{ event.registration_counts.Rejected }}</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="event-actions">
            <a href="{{ url_for('event_registrations.view_event_registration_details', event_id=event.id) }}" 
               class="btn btn-primary">
              <span class="btn-icon">👁️</span>
              View Registrations
            </a>
            
          </div>
        </div>
        {% endfor %}
      </div>
      
    {% else %}
      <div class="no-events">
        <div class="no-events-content">
          <div class="no-events-icon">
            <span class="icon">📅</span>
          </div>
          <h3 class="no-events-title">No Active Events</h3>
          <p class="no-events-subtitle">
            You don't have any active events yet. Submit an event request to get started.
          </p>
          <a href="{{ url_for('event_request.request_event') }}" class="btn btn-primary btn-lg">
            <span class="btn-icon">➕</span>
            Submit Event Request
          </a>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<!-- Event Registrations Page JavaScript -->
<script src="{{ url_for('static', filename='js/event-registrations.js') }}?v=1"></script>

{% endblock %}